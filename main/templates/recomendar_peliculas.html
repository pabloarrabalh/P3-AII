{% extends "base.html" %}

{% block titulo %}Recomendar Películas{% endblock %}

{% block contenido %}
    <form method="post">
        {% csrf_token %}
        <p>ID Usuario: {{ formulario.idUsuario }}</p>
        <p>Fecha (dd/mm/aaaa): {{ formulario.fecha }}</p>
        <button type="submit">Obtener Recomendaciones</button>
    </form>
    
    {% if recomendaciones %}
        <br>
        <p>Recomendaciones para Usuario: {{ usuario }}</p>
        <p>Películas anteriores a: {{ fecha|date:"d/m/Y" }}</p>
        <br>
        
        <table border="1">
            <tr>
                <th>Título</th>
                <th>Fecha</th>
                <th>Director</th>
                <th>Actores</th>
                <th>Recomendación</th>
            </tr>
            {% for rec in recomendaciones %}
            <tr>
                <td>{{ rec.titulo }}</td>
                <td>{{ rec.fecha|date:"d/m/Y" }}</td>
                <td>{{ rec.director }}</td>
                <td>{{ rec.actores }}</td>
                <td>{{ rec.recomendacion }}</td>
            </tr>
            {% endfor %}
        </table>
    {% elif usuario %}
        <br>
        <p>No se encontraron recomendaciones para el usuario {{ usuario }} anterior a la fecha {{ fecha|date:"d/m/Y" }}.</p>
    {% endif %}
{% endblock %}
